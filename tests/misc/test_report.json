{"created": 1756867208.0119333, "duration": 89.91934466362, "exitcode": 1, "root": "/home/ec2-user/ChatMRPT", "environment": {}, "summary": {"passed": 14, "error": 1, "failed": 4, "total": 19, "collected": 19}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_intent_clarification.py", "type": "Module"}]}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier", "outcome": "passed", "result": [{"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_no_data_general_question", "type": "Function", "lineno": 60}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_no_data_action_requests", "type": "Function", "lineno": 73}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_with_data_clear_action", "type": "Function", "lineno": 85}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_with_data_clear_explanation", "type": "Function", "lineno": 97}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_ambiguous_requests", "type": "Function", "lineno": 109}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_generate_clarification_with_data", "type": "Function", "lineno": 121}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_generate_clarification_with_analysis", "type": "Function", "lineno": 134}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_handle_clarification_response_numeric", "type": "Function", "lineno": 145}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_handle_clarification_response_text", "type": "Function", "lineno": 161}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_direct_tool_commands", "type": "Function", "lineno": 174}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_references_user_data", "type": "Function", "lineno": 188}]}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration", "outcome": "passed", "result": [{"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_send_message_no_data_arena", "type": "Function", "lineno": 217}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_send_message_with_data_ambiguous", "type": "Function", "lineno": 231}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_send_message_clarification_response", "type": "Function", "lineno": 266}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_streaming_endpoint_clarification", "type": "Function", "lineno": 288}]}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios", "outcome": "passed", "result": [{"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios::test_scenario_no_data_conversation", "type": "Function", "lineno": 338}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios::test_scenario_with_data_mixed_intents", "type": "Function", "lineno": 363}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios::test_scenario_tpr_workflow", "type": "Function", "lineno": 420}]}, {"nodeid": "tests/test_intent_clarification.py::TestArenaIntegration", "outcome": "passed", "result": [{"nodeid": "tests/test_intent_clarification.py::TestArenaIntegration::test_arena_mode_activated", "type": "Function", "lineno": 453}]}, {"nodeid": "tests/test_intent_clarification.py", "outcome": "passed", "result": [{"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier", "type": "Class"}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration", "type": "Class"}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios", "type": "Class"}, {"nodeid": "tests/test_intent_clarification.py::TestArenaIntegration", "type": "Class"}]}], "tests": [{"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_no_data_general_question", "lineno": 60, "outcome": "passed", "keywords": ["test_no_data_general_question", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.00272422656416893, "outcome": "passed"}, "call": {"duration": 0.000455465167760849, "outcome": "passed"}, "teardown": {"duration": 0.0003900849260389805, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_no_data_action_requests", "lineno": 73, "outcome": "passed", "keywords": ["test_no_data_action_requests", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.00046153599396348, "outcome": "passed"}, "call": {"duration": 0.0003124680370092392, "outcome": "passed"}, "teardown": {"duration": 0.0002499888651072979, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_with_data_clear_action", "lineno": 85, "outcome": "passed", "keywords": ["test_with_data_clear_action", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.0004728003405034542, "outcome": "passed"}, "call": {"duration": 0.00033464888110756874, "outcome": "passed"}, "teardown": {"duration": 0.00023730797693133354, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_with_data_clear_explanation", "lineno": 97, "outcome": "passed", "keywords": ["test_with_data_clear_explanation", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.0004298030398786068, "outcome": "passed"}, "call": {"duration": 0.00033408310264348984, "outcome": "passed"}, "teardown": {"duration": 0.0005376511253416538, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_ambiguous_requests", "lineno": 109, "outcome": "passed", "keywords": ["test_ambiguous_requests", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.0004409635439515114, "outcome": "passed"}, "call": {"duration": 0.00033454224467277527, "outcome": "passed"}, "teardown": {"duration": 0.00023665791377425194, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_generate_clarification_with_data", "lineno": 121, "outcome": "passed", "keywords": ["test_generate_clarification_with_data", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.00040726596489548683, "outcome": "passed"}, "call": {"duration": 0.0003086770884692669, "outcome": "passed"}, "teardown": {"duration": 0.00023005111142992973, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_generate_clarification_with_analysis", "lineno": 134, "outcome": "passed", "keywords": ["test_generate_clarification_with_analysis", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.00042451126500964165, "outcome": "passed"}, "call": {"duration": 0.0002817627973854542, "outcome": "passed"}, "teardown": {"duration": 0.00023281201720237732, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_handle_clarification_response_numeric", "lineno": 145, "outcome": "passed", "keywords": ["test_handle_clarification_response_numeric", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.00033144280314445496, "outcome": "passed"}, "call": {"duration": 0.0003440580330789089, "outcome": "passed"}, "teardown": {"duration": 0.0002334308810532093, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_handle_clarification_response_text", "lineno": 161, "outcome": "passed", "keywords": ["test_handle_clarification_response_text", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.0003273771144449711, "outcome": "passed"}, "call": {"duration": 0.0002832920290529728, "outcome": "passed"}, "teardown": {"duration": 0.00021316297352313995, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_direct_tool_commands", "lineno": 174, "outcome": "passed", "keywords": ["test_direct_tool_commands", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.000406850129365921, "outcome": "passed"}, "call": {"duration": 0.00028953002765774727, "outcome": "passed"}, "teardown": {"duration": 0.00022961199283599854, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestIntentClarifier::test_references_user_data", "lineno": 188, "outcome": "passed", "keywords": ["test_references_user_data", "TestIntentClarifier", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.00039589498192071915, "outcome": "passed"}, "call": {"duration": 0.0002939831465482712, "outcome": "passed"}, "teardown": {"duration": 0.0002497979439795017, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_send_message_no_data_arena", "lineno": 217, "outcome": "error", "keywords": ["test_send_message_no_data_arena", "TestRoutingIntegration", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 3.5685697090812027, "outcome": "failed", "crash": {"path": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/pydantic/_internal/_model_construction.py", "lineno": 139, "message": "ValueError: tuple.index(x): x not in tuple"}, "traceback": [{"path": "tests/test_intent_clarification.py", "lineno": 210, "message": "in app"}, {"path": "app/__init__.py", "lineno": 142, "message": "in create_app"}, {"path": "app/web/__init__.py", "lineno": 8, "message": "in <module>"}, {"path": "app/web/routes/__init__.py", "lineno": 32, "message": "in <module>"}, {"path": "app/web/routes/data_analysis_v3_routes.py", "lineno": 11, "message": "in <module>"}, {"path": "app/data_analysis_v3/__init__.py", "lineno": 6, "message": "in <module>"}, {"path": "app/data_analysis_v3/core/agent.py", "lineno": 12, "message": "in <module>"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1229, "message": "in _handle_fromlist"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/prompts/__init__.py", "lineno": 119, "message": "in __getattr__"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/_import_utils.py", "lineno": 29, "message": "in import_attr"}, {"path": "/usr/lib64/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/prompts/chat.py", "lineno": 39, "message": "in <module>"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/prompts/base.py", "lineno": 28, "message": "in <module>"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/output_parsers/base.py", "lineno": 18, "message": "in <module>"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1229, "message": "in _handle_fromlist"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/language_models/__init__.py", "lineno": 111, "message": "in __getattr__"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/_import_utils.py", "lineno": 29, "message": "in import_attr"}, {"path": "/usr/lib64/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/language_models/base.py", "lineno": 23, "message": "in <module>"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/caches.py", "lineno": 33, "message": "in <module>"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1229, "message": "in _handle_fromlist"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/runnables/__init__.py", "lineno": 129, "message": "in __getattr__"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/_import_utils.py", "lineno": 29, "message": "in import_attr"}, {"path": "/usr/lib64/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/runnables/config.py", "lineno": 17, "message": "in <module>"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/runnables/utils.py", "lineno": 28, "message": "in <module>"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/utils/pydantic.py", "lineno": 26, "message": "in <module>"}, {"path": "<frozen importlib._bootstrap>", "lineno": 1229, "message": "in _handle_fromlist"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/pydantic/__init__.py", "lineno": 435, "message": "in __getattr__"}, {"path": "/usr/lib64/python3.11/importlib/__init__.py", "lineno": 126, "message": "in import_module"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/pydantic/root_model.py", "lineno": 35, "message": "in <module>"}, {"path": "../chatmrpt_env/lib64/python3.11/site-packages/pydantic/_internal/_model_construction.py", "lineno": 139, "message": "in __new__"}], "longrepr": "tests/test_intent_clarification.py:210: in app\n    app = create_app('testing')\n          ^^^^^^^^^^^^^^^^^^^^^\napp/__init__.py:142: in create_app\n    from .web import admin_bp, register_all_blueprints\napp/web/__init__.py:8: in <module>\n    from .routes import main_bp\napp/web/routes/__init__.py:32: in <module>\n    from .data_analysis_v3_routes import data_analysis_v3_bp\napp/web/routes/data_analysis_v3_routes.py:11: in <module>\n    from app.data_analysis_v3.core.metadata_cache import MetadataCache\napp/data_analysis_v3/__init__.py:6: in <module>\n    from .core.agent import DataAnalysisAgent\napp/data_analysis_v3/core/agent.py:12: in <module>\n    from langchain_core.prompts import ChatPromptTemplate\n<frozen importlib._bootstrap>:1229: in _handle_fromlist\n    ???\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/prompts/__init__.py:119: in __getattr__\n    result = import_attr(attr_name, module_name, __spec__.parent)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/_import_utils.py:29: in import_attr\n    module = import_module(f\".{module_name}\", package=package)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/prompts/chat.py:39: in <module>\n    from langchain_core.prompts.base import BasePromptTemplate\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/prompts/base.py:28: in <module>\n    from langchain_core.output_parsers.base import BaseOutputParser\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/output_parsers/base.py:18: in <module>\n    from langchain_core.language_models import LanguageModelOutput\n<frozen importlib._bootstrap>:1229: in _handle_fromlist\n    ???\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/language_models/__init__.py:111: in __getattr__\n    result = import_attr(attr_name, module_name, __spec__.parent)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/_import_utils.py:29: in import_attr\n    module = import_module(f\".{module_name}\", package=package)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/language_models/base.py:23: in <module>\n    from langchain_core.caches import BaseCache\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/caches.py:33: in <module>\n    from langchain_core.runnables import run_in_executor\n<frozen importlib._bootstrap>:1229: in _handle_fromlist\n    ???\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/runnables/__init__.py:129: in __getattr__\n    result = import_attr(attr_name, module_name, __spec__.parent)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/_import_utils.py:29: in import_attr\n    module = import_module(f\".{module_name}\", package=package)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/runnables/config.py:17: in <module>\n    from langchain_core.runnables.utils import (\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/runnables/utils.py:28: in <module>\n    from langchain_core.utils.pydantic import create_model  # noqa: F401\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/langchain_core/utils/pydantic.py:26: in <module>\n    from pydantic import (  # type: ignore[deprecated]\n<frozen importlib._bootstrap>:1229: in _handle_fromlist\n    ???\n../chatmrpt_env/lib64/python3.11/site-packages/pydantic/__init__.py:435: in __getattr__\n    module = import_module(module_name, package=package)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/importlib/__init__.py:126: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../chatmrpt_env/lib64/python3.11/site-packages/pydantic/root_model.py:35: in <module>\n    class RootModel(BaseModel, typing.Generic[RootModelRootType], metaclass=_RootModelMetaclass):\n../chatmrpt_env/lib64/python3.11/site-packages/pydantic/_internal/_model_construction.py:139: in __new__\n    if Generic in mro and mro.index(Generic) < mro.index(BaseModel_):\n                                               ^^^^^^^^^^^^^^^^^^^^^\nE   ValueError: tuple.index(x): x not in tuple"}, "teardown": {"duration": 0.0004319748841226101, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_send_message_with_data_ambiguous", "lineno": 231, "outcome": "failed", "keywords": ["test_send_message_with_data_ambiguous", "TestRoutingIntegration", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.5591002902947366, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867123.7472823, "msecs": 747.0, "relativeCreated": 6758.523941040039, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 18.508793832734227, "outcome": "failed", "crash": {"path": "/home/ec2-user/ChatMRPT/tests/test_intent_clarification.py", "lineno": 257, "message": "AssertionError: assert None == True\n +  where None = <built-in method get of dict object at 0x7f2312d5e1c0>('needs_clarification')\n +    where <built-in method get of dict object at 0x7f2312d5e1c0> = {'arena_mode': True, 'battle_id': 'test_with_data', 'latency_a': 8104.988813400269, 'latency_b': 10367.771625518799, ...}.get"}, "traceback": [{"path": "tests/test_intent_clarification.py", "lineno": 257, "message": "in test_send_message_with_data_ambiguous"}], "log": [{"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867123.775681, "msecs": 775.0, "relativeCreated": 6786.9226932525635, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867142.2529778, "msecs": 252.0, "relativeCreated": 25264.219522476196, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867142.256521, "msecs": 256.0, "relativeCreated": 25267.762660980225, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}], "longrepr": "tests/test_intent_clarification.py:257: in test_send_message_with_data_ambiguous\n    assert data.get('needs_clarification') == True\nE   AssertionError: assert None == True\nE    +  where None = <built-in method get of dict object at 0x7f2312d5e1c0>('needs_clarification')\nE    +    where <built-in method get of dict object at 0x7f2312d5e1c0> = {'arena_mode': True, 'battle_id': 'test_with_data', 'latency_a': 8104.988813400269, 'latency_b': 10367.771625518799, ...}.get"}, "teardown": {"duration": 0.0006859521381556988, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_send_message_clarification_response", "lineno": 266, "outcome": "passed", "keywords": ["test_send_message_clarification_response", "TestRoutingIntegration", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.6743078208528459, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867142.9523482, "msecs": 952.0, "relativeCreated": 25963.589906692505, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 0.6141661233268678, "outcome": "passed"}, "teardown": {"duration": 0.0003856383264064789, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestRoutingIntegration::test_streaming_endpoint_clarification", "lineno": 288, "outcome": "failed", "keywords": ["test_streaming_endpoint_clarification", "__wrapped__", "patchings", "TestRoutingIntegration", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.5308849001303315, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867144.0993001, "msecs": 99.0, "relativeCreated": 27110.541820526123, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 0.0014967392198741436, "outcome": "failed", "crash": {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1419, "message": "AttributeError: <module 'app.web.routes.analysis_routes' from '/home/ec2-user/ChatMRPT/app/web/routes/analysis_routes.py'> does not have the attribute 'request_interpreter'"}, "traceback": [{"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1375, "message": "in patched"}, {"path": "/usr/lib64/python3.11/contextlib.py", "lineno": 137, "message": "in __enter__"}, {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1357, "message": "in decoration_helper"}, {"path": "/usr/lib64/python3.11/contextlib.py", "lineno": 517, "message": "in enter_context"}, {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1446, "message": "in __enter__"}, {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1419, "message": "in get_original"}], "longrepr": "/usr/lib64/python3.11/unittest/mock.py:1375: in patched\n    with self.decoration_helper(patched,\n/usr/lib64/python3.11/contextlib.py:137: in __enter__\n    return next(self.gen)\n           ^^^^^^^^^^^^^^\n/usr/lib64/python3.11/unittest/mock.py:1357: in decoration_helper\n    arg = exit_stack.enter_context(patching)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/contextlib.py:517: in enter_context\n    result = _enter(cm)\n             ^^^^^^^^^^\n/usr/lib64/python3.11/unittest/mock.py:1446: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/unittest/mock.py:1419: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'app.web.routes.analysis_routes' from '/home/ec2-user/ChatMRPT/app/web/routes/analysis_routes.py'> does not have the attribute 'request_interpreter'"}, "teardown": {"duration": 0.0004576300270855427, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios::test_scenario_no_data_conversation", "lineno": 338, "outcome": "passed", "keywords": ["test_scenario_no_data_conversation", "TestEndToEndScenarios", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.6345279840752482, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867145.0146952, "msecs": 14.0, "relativeCreated": 28025.93684196472, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 37.40565925184637, "outcome": "passed", "log": [{"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867145.0364912, "msecs": 36.0, "relativeCreated": 28047.732830047607, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867151.3038673, "msecs": 303.0, "relativeCreated": 34315.10901451111, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867151.307128, "msecs": 307.0, "relativeCreated": 34318.3696269989, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867151.3198566, "msecs": 319.0, "relativeCreated": 34331.098318099976, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867160.3990114, "msecs": 399.0, "relativeCreated": 43410.253047943115, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867160.4019358, "msecs": 401.0, "relativeCreated": 43413.177490234375, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867160.4166164, "msecs": 416.0, "relativeCreated": 43427.858114242554, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867169.7731395, "msecs": 773.0, "relativeCreated": 52784.38115119934, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867169.7759268, "msecs": 775.0, "relativeCreated": 52787.16850280762, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867169.7900846, "msecs": 790.0, "relativeCreated": 52801.326274871826, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867182.4184191, "msecs": 418.0, "relativeCreated": 65429.66079711914, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867182.421762, "msecs": 421.0, "relativeCreated": 65433.00366401672, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "teardown": {"duration": 0.000689137727022171, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios::test_scenario_with_data_mixed_intents", "lineno": 363, "outcome": "failed", "keywords": ["test_scenario_with_data_mixed_intents", "TestEndToEndScenarios", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.7032277570106089, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867183.126379, "msecs": 126.0, "relativeCreated": 66137.62068748474, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 22.844803113024682, "outcome": "failed", "crash": {"path": "/home/ec2-user/ChatMRPT/tests/test_intent_clarification.py", "lineno": 400, "message": "AssertionError: assert None == True\n +  where None = <built-in method get of dict object at 0x7f2312f8d880>('needs_clarification')\n +    where <built-in method get of dict object at 0x7f2312f8d880> = {'arena_mode': True, 'battle_id': 'scenario_with_data', 'latency_a': 6750.847339630127, 'latency_b': 5893.393993377686, ...}.get"}, "traceback": [{"path": "tests/test_intent_clarification.py", "lineno": 400, "message": "in test_scenario_with_data_mixed_intents"}], "log": [{"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867183.8091335, "msecs": 809.0, "relativeCreated": 66820.3752040863, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867193.3035877, "msecs": 303.0, "relativeCreated": 76314.82934951782, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867193.3066869, "msecs": 306.0, "relativeCreated": 76317.92855262756, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867193.320133, "msecs": 320.0, "relativeCreated": 76331.37464523315, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867205.9682972, "msecs": 968.0, "relativeCreated": 88979.5389175415, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}, {"name": "app.interaction.events", "msg": "Error logging Arena battle: no such table: arena_battles", "args": null, "levelname": "ERROR", "levelno": 40, "pathname": "/home/ec2-user/ChatMRPT/app/interaction/events.py", "filename": "events.py", "module": "events", "exc_info": null, "exc_text": "Traceback (most recent call last):\n  File \"/home/ec2-user/ChatMRPT/app/interaction/events.py\", line 621, in log_arena_battle\n    cursor.execute('SELECT battle_id FROM arena_battles WHERE battle_id = ?', (battle_id,))\nsqlite3.OperationalError: no such table: arena_battles", "stack_info": null, "lineno": 686, "funcName": "log_arena_battle", "created": 1756867205.9717765, "msecs": 971.0, "relativeCreated": 88983.01815986633, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}], "longrepr": "tests/test_intent_clarification.py:400: in test_scenario_with_data_mixed_intents\n    assert data.get('needs_clarification') == True\nE   AssertionError: assert None == True\nE    +  where None = <built-in method get of dict object at 0x7f2312f8d880>('needs_clarification')\nE    +    where <built-in method get of dict object at 0x7f2312f8d880> = {'arena_mode': True, 'battle_id': 'scenario_with_data', 'latency_a': 6750.847339630127, 'latency_b': 5893.393993377686, ...}.get"}, "teardown": {"duration": 0.0006570997647941113, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestEndToEndScenarios::test_scenario_tpr_workflow", "lineno": 420, "outcome": "passed", "keywords": ["test_scenario_tpr_workflow", "TestEndToEndScenarios", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.7391308769583702, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867206.7262938, "msecs": 726.0, "relativeCreated": 89737.53547668457, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 0.5833543250337243, "outcome": "passed", "log": [{"name": "app.tpr_module.integration.tpr_workflow_router", "msg": "TPR Router: General question detected, may interrupt workflow", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/tpr_module/integration/tpr_workflow_router.py", "filename": "tpr_workflow_router.py", "module": "tpr_workflow_router", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 92, "funcName": "route_message", "created": 1756867207.3128262, "msecs": 312.0, "relativeCreated": 90324.06783103943, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "teardown": {"duration": 0.00045992573723196983, "outcome": "passed"}}, {"nodeid": "tests/test_intent_clarification.py::TestArenaIntegration::test_arena_mode_activated", "lineno": 453, "outcome": "failed", "keywords": ["test_arena_mode_activated", "__wrapped__", "patchings", "TestArenaIntegration", "test_intent_clarification.py", "tests", "ChatMRPT", ""], "setup": {"duration": 0.4321886133402586, "outcome": "passed", "log": [{"name": "app", "msg": "Arena system initialization failed: name 'HybridLLMRouter' is not defined", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/home/ec2-user/ChatMRPT/app/__init__.py", "filename": "__init__.py", "module": "__init__", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 160, "funcName": "create_app", "created": 1756867207.743895, "msecs": 743.0, "relativeCreated": 90755.13672828674, "thread": 139789736830784, "threadName": "MainThread", "processName": "MainProcess", "process": 1572281}]}, "call": {"duration": 0.0005058902315795422, "outcome": "failed", "crash": {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1419, "message": "AttributeError: <module 'app.web.routes.analysis_routes' from '/home/ec2-user/ChatMRPT/app/web/routes/analysis_routes.py'> does not have the attribute 'requests'"}, "traceback": [{"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1375, "message": "in patched"}, {"path": "/usr/lib64/python3.11/contextlib.py", "lineno": 137, "message": "in __enter__"}, {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1357, "message": "in decoration_helper"}, {"path": "/usr/lib64/python3.11/contextlib.py", "lineno": 517, "message": "in enter_context"}, {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1446, "message": "in __enter__"}, {"path": "/usr/lib64/python3.11/unittest/mock.py", "lineno": 1419, "message": "in get_original"}], "longrepr": "/usr/lib64/python3.11/unittest/mock.py:1375: in patched\n    with self.decoration_helper(patched,\n/usr/lib64/python3.11/contextlib.py:137: in __enter__\n    return next(self.gen)\n           ^^^^^^^^^^^^^^\n/usr/lib64/python3.11/unittest/mock.py:1357: in decoration_helper\n    arg = exit_stack.enter_context(patching)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/contextlib.py:517: in enter_context\n    result = _enter(cm)\n             ^^^^^^^^^^\n/usr/lib64/python3.11/unittest/mock.py:1446: in __enter__\n    original, local = self.get_original()\n                      ^^^^^^^^^^^^^^^^^^^\n/usr/lib64/python3.11/unittest/mock.py:1419: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'app.web.routes.analysis_routes' from '/home/ec2-user/ChatMRPT/app/web/routes/analysis_routes.py'> does not have the attribute 'requests'"}, "teardown": {"duration": 0.0005140579305589199, "outcome": "passed"}}], "warnings": [{"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "The 'value' parameter must be a string. Bytes are deprecated and will not be supported in Werkzeug 3.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/chatmrpt_env/lib64/python3.11/site-packages/werkzeug/sansio/response.py", "lineno": 261}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/config/redis_config.py", "lineno": 40}, {"message": "Call to '__init__' function with deprecated usage of input argument/s 'retry_on_timeout'. (TimeoutError is included by default.) -- Deprecated since version 6.0.0.", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/ec2-user/ChatMRPT/app/core/arena_manager.py", "lineno": 193}]}