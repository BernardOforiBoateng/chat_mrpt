Hi Grace,

Good catch! Your maps are actually revealing an important limitation of DBI.

**What's happening:**
DBI = NDBI - NDVI. In non-arid regions (southwest Mali where Bamako is), vegetation is present, so NDVI is high. This causes DBI to be LOW even in urban areas, because it subtracts out the vegetation signal.

**This is a known limitation:** Rasul et al. (2018) designed DBI specifically for "cities in dry climates." It doesn't work well in humid/vegetated regions.

**For your analysis:**
- Arid regions (northern Mali, northern Nigeria): Use DBI ✓
- Non-arid regions (southwest Mali, southern Nigeria): Use GHSL/MODIS instead, NOT DBI ❌

**Code fixes needed:**

1. Line 309 - GHSL needs multiply(100):
```javascript
var ghslValue = safeGetNumber(ghslDict, 'ghsl').multiply(100);
```

2. Line 306 - GHSL scale too coarse (1000m should be 10m or 30m):
```javascript
scale: 30,  // or 10 for native GHSL resolution
```

3. Consider flagging DBI values as "not valid" for non-arid points using your arid_flag.

**Bottom line:** DBI is working correctly - it's just the wrong index for non-arid urban areas. For southwest Mali (Bamako), check your GHSL and MODIS values instead (after applying the fixes above).

— Bernard
