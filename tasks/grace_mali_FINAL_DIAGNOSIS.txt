Hi Grace,

I analyzed your Mali CSV data. Found the problems!

**THE MAIN ISSUE: GHSL IS BROKEN**

Your GHSL values are capped at 30% maximum. In urban Bamako (where MODIS shows 85-100% urban), GHSL is stuck at 30%. This is WRONG.

**DATA EVIDENCE:**
For 46 Bamako points where MODIS > 50% urban:
- MODIS average: 85.3% ✓ (correct, shows urban core)
- GHSL average: 29.7% ❌ (stuck at cap, broken)
- DBI average: 35.5% ⚠️ (low, but at least varies)

**ROOT CAUSES:**

1. **GHSL scale: 1000** (line 306)
   - 1km resolution is WAY too coarse
   - Loses all detail, averages out urban areas
   - Should be: `scale: 30` (or 10 for native)

2. **GHSL missing multiply(100)** (line 309)
   - You're getting fractions (0-0.30) not percentages
   - But wait... your CSV shows "30.0%" not "0.30"
   - This means you either:
     a) Already multiplied by 100 after I told you to, OR
     b) The raster itself is somehow scaled wrong

3. **GHSL raster might be corrupted**
   - The 30% hard cap suggests the source raster has issues
   - Check: `ee.Image("projects/ee-gracebea/assets/Nigeria_GHSL_2018")`
   - Is this actually a Mali raster or Nigeria? (Line 239 says Nigeria!)

**WAIT - LINE 239 SAYS:**
```javascript
var ghsl = ee.Image("projects/ee-gracebea/assets/Nigeria_GHSL_2018")
```

**YOU'RE USING NIGERIA GHSL FOR MALI!** ❌

That's why it's broken. You need a Mali GHSL raster, not Nigeria.

**ABOUT DBI:**
DBI is working (values vary 0-55%), but it's conservative:
- In urban areas: DBI = 35% while MODIS = 85%
- This is similar to my Delta State findings where DBI was 33% of MODIS

DBI is designed to be conservative (reduce false positives in arid regions), so lower values are expected, but the gap here is larger than in my Delta analysis.

**FIXES NEEDED:**

1. **Use the correct GHSL raster for Mali:**
```javascript
var ghsl = ee.Image("projects/ee-gracebea/assets/Mali_GHSL_2018")  // NOT Nigeria!
```

2. **Fix GHSL scale:**
```javascript
scale: 30,  // or 10
```

3. **Ensure GHSL multiply(100):**
```javascript
var ghslValue = safeGetNumber(ghslDict, 'ghsl').multiply(100);
```

**BOTTOM LINE:**
- Your DBI calculation is working correctly
- Your GHSL is completely broken because you're using Nigeria raster for Mali
- Fix GHSL, re-run, and DBI should look more reasonable in comparison

— Bernard
