<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatMRPT Arena - Model Comparison</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Arena CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/arena.css') }}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>
    <div class="arena-container">
        <!-- Arena Header -->
        <div class="arena-header">
            <div class="battle-indicator">
                <span class="battle-icon">‚öîÔ∏è</span>
                <span>Battle Mode</span>
            </div>
        </div>

        <!-- Arena Split View -->
        <div class="arena-split-view" id="arenaView">
            <!-- Left Panel - Assistant A -->
            <div class="model-panel left-panel" id="panelA">
                <div class="model-header">
                    <div class="model-label">Assistant A</div>
                    <div class="model-actions">
                        <button class="action-btn" onclick="arenaHandler.regenerateResponse('a')" title="Regenerate">
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="action-btn" onclick="arenaHandler.copyResponse('a')" title="Copy">
                            <i class="fas fa-clipboard"></i>
                        </button>
                        <button class="action-btn" onclick="arenaHandler.expandResponse('a')" title="Expand">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="response-area" id="responseA">
                    <div class="response-content">
                        <p>Hello! How can I help you today?</p>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Assistant B -->
            <div class="model-panel right-panel" id="panelB">
                <div class="model-header">
                    <div class="model-label">Assistant B</div>
                    <div class="model-actions">
                        <button class="action-btn" onclick="arenaHandler.regenerateResponse('b')" title="Regenerate">
                            <i class="fas fa-redo"></i>
                        </button>
                        <button class="action-btn" onclick="arenaHandler.copyResponse('b')" title="Copy">
                            <i class="fas fa-clipboard"></i>
                        </button>
                        <button class="action-btn" onclick="arenaHandler.expandResponse('b')" title="Expand">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="response-area" id="responseB">
                    <div class="response-content">
                        <p>Hello! üëã How can I assist you today? Whether you need help with a question, a task, or just want to chat‚ÄîI'm here to help!</p>
                        <p>What would you like to talk about or solve? ü§î</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voting Area -->
        <div class="voting-area" id="votingArea" style="display: none;">
            <button class="vote-btn vote-left" onclick="arenaHandler.vote('left')">
                <span>‚¨ÖÔ∏è</span>
                <span>Left is Better</span>
            </button>
            <button class="vote-btn vote-tie" onclick="arenaHandler.vote('tie')">
                <span>ü§ù</span>
                <span>It's a tie</span>
            </button>
            <button class="vote-btn vote-bad" onclick="arenaHandler.vote('both_bad')">
                <span>üòï</span>
                <span>Both are bad</span>
            </button>
            <button class="vote-btn vote-right" onclick="arenaHandler.vote('right')">
                <span>Right is Better</span>
                <span>‚û°Ô∏è</span>
            </button>
        </div>

        <!-- Input Area -->
        <div class="arena-input-area">
            <div class="arena-input-container">
                <textarea 
                    class="arena-input" 
                    id="arenaInput" 
                    placeholder="Ask a follow-up question..."
                    rows="1"
                ></textarea>
                <button class="arena-send-btn" id="arenaSendBtn" onclick="arenaHandler.sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                    <span>Send</span>
                </button>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div class="modal fade" id="leaderboardModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content" style="background-color: #2a2a2a; color: #e0e0e0;">
                    <div class="modal-header" style="border-bottom: 1px solid #3a3a3a;">
                        <h5 class="modal-title">
                            <i class="fas fa-trophy" style="color: #ffd700;"></i>
                            Model Leaderboard
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="leaderboardContent">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Reveal Modal -->
        <div class="modal fade" id="modelRevealModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: #2a2a2a; color: #e0e0e0;">
                    <div class="modal-header" style="border-bottom: 1px solid #3a3a3a;">
                        <h5 class="modal-title">Models Revealed!</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body" id="modelRevealContent">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Bar (Optional) -->
    <nav class="navbar navbar-dark bg-dark fixed-bottom">
        <div class="container-fluid">
            <div class="d-flex gap-3">
                <button class="btn btn-outline-light btn-sm" onclick="arenaHandler.newBattle()">
                    <i class="fas fa-plus"></i> New Battle
                </button>
                <button class="btn btn-outline-light btn-sm" onclick="arenaHandler.showLeaderboard()">
                    <i class="fas fa-chart-bar"></i> Leaderboard
                </button>
                <button class="btn btn-outline-light btn-sm" onclick="arenaHandler.toggleMode()">
                    <i class="fas fa-exchange-alt"></i> Normal Mode
                </button>
            </div>
            <div class="text-light small">
                <span id="battleCount">0</span> battles completed
            </div>
        </div>
    </nav>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Arena Handler JS -->
    <script type="module">
        import { ArenaHandler } from "{{ url_for('static', filename='js/modules/chat/arena-handler.js') }}";
        window.arenaHandler = new ArenaHandler();
    </script>
</body>
</html>