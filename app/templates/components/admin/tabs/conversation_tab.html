<div class="section-card">
    <h2><i class="bi bi-chat-dots me-2"></i>Conversation Messages</h2>
    
    <!-- Message Search -->
    <div class="conversation-search">
        <div class="row align-items-end">
            <div class="col-md-8">
                <label for="messageSearchInput" class="form-label">Search Messages</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="messageSearchInput" placeholder="Enter search term...">
                    <button class="btn btn-outline-secondary" type="button" id="searchMessagesBtn">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-4">
                <label class="form-label">Filter by Type</label>
                <div class="d-flex gap-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="userMessagesOnly">
                        <label class="form-check-label" for="userMessagesOnly">User</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="aiMessagesOnly">
                        <label class="form-check-label" for="aiMessagesOnly">AI</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="systemMessagesOnly">
                        <label class="form-check-label" for="systemMessagesOnly">System</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Message List -->
    <div id="messageList">
        {% for message in messages %}
        <div class="{{ message.sender }}-message" data-sender="{{ message.sender }}">
            <div class="timestamp">
                {{ message.timestamp.strftime('%Y-%m-%d %H:%M:%S') if message.timestamp else 'N/A' }} 
                - {{ message.sender.title() }}
            </div>
            <div class="content">{{ message.content }}</div>
        </div>
        {% else %}
        <div class="text-center text-muted py-4">
            <i class="bi bi-chat-dots text-muted" style="font-size: 2rem;"></i>
            <p>No messages found for this session.</p>
        </div>
        {% endfor %}
    </div>
</div> 