<div class="row">
    <div class="col-md-7">
        <div class="section-card">
            <h2><i class="bi bi-info-circle me-2"></i>Session Information</h2>
            <div class="row">
                <div class="col-sm-6">
                    <h4>Session Details</h4>
                    <p><strong>Session ID:</strong> {{ session_info.session_id }}</p>
                    <p><strong>Created:</strong> {{ session_info.created_at.strftime('%Y-%m-%d %H:%M:%S') if session_info.created_at else 'N/A' }}</p>
                    <p><strong>Last Activity:</strong> {{ session_info.last_activity.strftime('%Y-%m-%d %H:%M:%S') if session_info.last_activity else 'N/A' }}</p>
                    <p><strong>Duration:</strong> {{ session_info.duration or 'N/A' }}</p>
                </div>
                <div class="col-sm-6">
                    <h4>Activity Summary</h4>
                    <p><strong>Total Messages:</strong> {{ messages|length }}</p>
                    <p><strong>Uploads:</strong> {{ uploads|length }}</p>
                    <p><strong>Visualizations:</strong> {{ visualizations|length }}</p>
                    <p><strong>Analysis Events:</strong> {{ events|length }}</p>
                </div>
            </div>
        </div>
        
        <div class="section-card">
            <h2><i class="bi bi-cpu me-2"></i>Session Metadata</h2>
            {% if session_info.metadata %}
                <pre class="metadata-json">{{ session_info.metadata | tojson(indent=2) }}</pre>
            {% else %}
                <p class="text-muted">No metadata available for this session.</p>
            {% endif %}
        </div>
    </div>
    
    <div class="col-md-5">
        <div class="section-card">
            <h2><i class="bi bi-pie-chart me-2"></i>Message Distribution</h2>
            <div class="chart-container" style="position: relative; height:200px;">
                <canvas id="messageTypeChart" 
                        data-user-msgs="{{ messages | selectattr('sender', 'equalto', 'user') | list | length }}"
                        data-ai-msgs="{{ messages | selectattr('sender', 'equalto', 'assistant') | list | length }}"
                        data-system-msgs="{{ messages | selectattr('sender', 'equalto', 'system') | list | length }}">
                </canvas>
            </div>
        </div>
        
        <div class="section-card">
            <h2><i class="bi bi-clock me-2"></i>Response Times</h2>
            <div class="chart-container" style="position: relative; height:200px;">
                <canvas id="responseTimeChart"></canvas>
            </div>
        </div>
    </div>
</div> 